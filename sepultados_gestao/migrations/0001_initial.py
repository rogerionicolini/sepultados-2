# Generated by Django 4.2.23 on 2025-07-12 14:26

from decimal import Decimal
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import sepultados_gestao.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Cemiterio',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('endereco', models.CharField(blank=True, max_length=255, null=True)),
                ('telefone', models.CharField(blank=True, max_length=20, null=True)),
                ('cidade', models.CharField(blank=True, max_length=100, null=True)),
                ('estado', models.CharField(blank=True, choices=[('AC', 'AC'), ('AL', 'AL'), ('AP', 'AP'), ('AM', 'AM'), ('BA', 'BA'), ('CE', 'CE'), ('DF', 'DF'), ('ES', 'ES'), ('GO', 'GO'), ('MA', 'MA'), ('MT', 'MT'), ('MS', 'MS'), ('MG', 'MG'), ('PA', 'PA'), ('PB', 'PB'), ('PR', 'PR'), ('PE', 'PE'), ('PI', 'PI'), ('RJ', 'RJ'), ('RN', 'RN'), ('RS', 'RS'), ('RO', 'RO'), ('RR', 'RR'), ('SC', 'SC'), ('SP', 'SP'), ('SE', 'SE'), ('TO', 'TO')], max_length=2, null=True)),
                ('tempo_minimo_exumacao', models.PositiveIntegerField(default=36, help_text='Tempo mínimo exigido entre sepultamentos no mesmo túmulo (em meses)', verbose_name='Tempo mínimo para exumação (em meses)')),
            ],
            options={
                'verbose_name': 'Cemitério',
                'verbose_name_plural': 'Cemitérios',
            },
        ),
        migrations.CreateModel(
            name='MovimentacaoSepultado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_movimentacao', models.CharField(blank=True, editable=False, max_length=20, null=True, verbose_name='Número da movimentação')),
                ('tipo', models.CharField(choices=[('EXUMACAO', 'Exumação'), ('TRANSLADO', 'Translado')], max_length=10, verbose_name='Tipo da movimentação')),
                ('data', models.DateField(verbose_name='Data da movimentação')),
                ('motivo', models.CharField(help_text='Ex: Liberação do túmulo, Compartilhamento, Transferência etc.', max_length=255)),
                ('destino_tipo', models.CharField(choices=[('INTERNO', 'Outro túmulo no mesmo cemitério'), ('EXTERNO', 'Outro cemitério'), ('OSSARIO', 'Ossário'), ('NAO_INFORMADO', 'Não informado')], default='NAO_INFORMADO', max_length=20, verbose_name='Tipo de destino')),
                ('cemiterio_destino_nome', models.CharField(blank=True, max_length=100, verbose_name='Nome do cemitério de destino')),
                ('cidade_destino', models.CharField(blank=True, max_length=100, verbose_name='Cidade de destino')),
                ('estado_destino', models.CharField(blank=True, choices=[('AC', 'AC'), ('AL', 'AL'), ('AP', 'AP'), ('AM', 'AM'), ('BA', 'BA'), ('CE', 'CE'), ('DF', 'DF'), ('ES', 'ES'), ('GO', 'GO'), ('MA', 'MA'), ('MT', 'MT'), ('MS', 'MS'), ('MG', 'MG'), ('PA', 'PA'), ('PB', 'PB'), ('PR', 'PR'), ('PE', 'PE'), ('PI', 'PI'), ('RJ', 'RJ'), ('RN', 'RN'), ('RS', 'RS'), ('RO', 'RO'), ('RR', 'RR'), ('SC', 'SC'), ('SP', 'SP'), ('SE', 'SE'), ('TO', 'TO')], max_length=2, verbose_name='Estado de destino')),
                ('observacoes', models.TextField(blank=True, verbose_name='Observações')),
                ('nome', models.CharField(blank=True, max_length=255, null=True, verbose_name='Nome')),
                ('cpf', models.CharField(blank=True, max_length=18, null=True, verbose_name='CPF')),
                ('endereco', models.CharField(blank=True, max_length=255, null=True, verbose_name='Endereço')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('forma_pagamento', models.CharField(choices=[('gratuito', 'Gratuito'), ('avista', 'À Vista'), ('parcelado', 'Parcelado')], default='gratuito', max_length=10, verbose_name='Forma de Pagamento')),
                ('quantidade_parcelas', models.PositiveIntegerField(blank=True, null=True, verbose_name='Quantidade de Parcelas')),
                ('valor', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Valor')),
            ],
            options={
                'verbose_name': 'Exumação/Translado',
                'verbose_name_plural': 'Exumações/Translados',
            },
        ),
        migrations.CreateModel(
            name='Plano',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=50, unique=True)),
                ('descricao', models.TextField(blank=True, null=True)),
                ('preco_mensal', models.DecimalField(decimal_places=2, max_digits=8)),
                ('usuarios_min', models.PositiveIntegerField()),
                ('usuarios_max', models.PositiveIntegerField()),
                ('sepultados_max', models.PositiveIntegerField(blank=True, null=True)),
                ('inclui_api', models.BooleanField(default=False)),
                ('inclui_erp', models.BooleanField(default=False)),
                ('inclui_suporte_prioritario', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Prefeitura',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=255, verbose_name='Nome da Prefeitura')),
                ('cnpj', models.CharField(max_length=18, verbose_name='CNPJ')),
                ('responsavel', models.CharField(max_length=255, verbose_name='Responsável')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='E-mail')),
                ('site', models.URLField(blank=True, null=True, verbose_name='Site')),
                ('logradouro', models.CharField(max_length=255, verbose_name='Logradouro')),
                ('endereco_numero', models.CharField(max_length=20, verbose_name='Número')),
                ('endereco_bairro', models.CharField(blank=True, max_length=100, null=True, verbose_name='Bairro')),
                ('endereco_cidade', models.CharField(max_length=100, verbose_name='Cidade')),
                ('endereco_estado', models.CharField(choices=[('AC', 'AC'), ('AL', 'AL'), ('AP', 'AP'), ('AM', 'AM'), ('BA', 'BA'), ('CE', 'CE'), ('DF', 'DF'), ('ES', 'ES'), ('GO', 'GO'), ('MA', 'MA'), ('MT', 'MT'), ('MS', 'MS'), ('MG', 'MG'), ('PA', 'PA'), ('PB', 'PB'), ('PR', 'PR'), ('PE', 'PE'), ('PI', 'PI'), ('RJ', 'RJ'), ('RN', 'RN'), ('RS', 'RS'), ('RO', 'RO'), ('RR', 'RR'), ('SC', 'SC'), ('SP', 'SP'), ('SE', 'SE'), ('TO', 'TO')], max_length=2, verbose_name='Estado')),
                ('endereco_cep', models.CharField(max_length=10, verbose_name='CEP')),
                ('logo', models.ImageField(blank=True, null=True, upload_to='logos/', verbose_name='Logotipo da Prefeitura')),
                ('brasao', models.ImageField(blank=True, null=True, upload_to='brasoes/', verbose_name='Brasão da Prefeitura')),
                ('multa_percentual', models.DecimalField(decimal_places=2, default=0.0, help_text='Percentual da multa cobrada em caso de atraso (ex: 2%)', max_digits=5, verbose_name='Multa por atraso (%)')),
                ('juros_mensal_percentual', models.DecimalField(decimal_places=2, default=1.0, help_text='Percentual mensal de juros em caso de atraso (ex: 1%)', max_digits=5, verbose_name='Juros mensal por atraso (%)')),
                ('clausulas_contrato', models.TextField(blank=True, help_text='Esse texto será inserido automaticamente no meio dos contratos PDF.', verbose_name='Cláusulas padrão do contrato')),
                ('usuario', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Usuário responsável')),
            ],
            options={
                'verbose_name': 'Prefeitura',
                'verbose_name_plural': 'Prefeituras',
            },
        ),
        migrations.CreateModel(
            name='Quadra',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20)),
                ('cemiterio', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.cemiterio')),
            ],
        ),
        migrations.CreateModel(
            name='Tumulo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_estrutura', models.CharField(choices=[('tumulo', 'Túmulo'), ('perpetua', 'Perpétua'), ('sepultura', 'Sepultura'), ('jazigo', 'Jazigo'), ('outro', 'Outro')], default='tumulo', max_length=20, verbose_name='Tipo de estrutura')),
                ('identificador', models.CharField(max_length=50)),
                ('usar_linha', models.BooleanField(default=False, verbose_name='Usar linha')),
                ('linha', models.PositiveIntegerField(blank=True, null=True, verbose_name='Linha')),
                ('reservado', models.BooleanField(default=False, verbose_name='Reservar este túmulo')),
                ('motivo_reserva', models.CharField(blank=True, max_length=255, verbose_name='Motivo da reserva')),
                ('status', models.CharField(choices=[('disponivel', 'Disponível'), ('ocupado', 'Ocupado'), ('reservado', 'Reservado')], default='disponivel', editable=False, max_length=20)),
                ('capacidade', models.PositiveIntegerField(default=1, help_text='Número máximo de sepultamentos simultâneos neste túmulo.', verbose_name='Capacidade de sepultamentos')),
                ('cemiterio', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.cemiterio', verbose_name='Cemiterio')),
                ('quadra', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.quadra')),
            ],
            options={
                'verbose_name': 'Túmulo',
                'verbose_name_plural': 'Túmulos',
            },
        ),
        migrations.CreateModel(
            name='Sepultado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=255)),
                ('sexo', models.CharField(choices=[('M', 'Masculino'), ('F', 'Feminino'), ('O', 'Outro'), ('NI', 'Não Informado')], default='NI', max_length=2, verbose_name='Sexo')),
                ('sexo_outro_descricao', models.CharField(blank=True, max_length=100, null=True, verbose_name='Descrição do Sexo (se Outro)')),
                ('data_nascimento', models.DateField(blank=True, null=True)),
                ('local_nascimento', models.CharField(blank=True, max_length=255, null=True)),
                ('nacionalidade', models.CharField(blank=True, max_length=100, null=True)),
                ('cor_pele', models.CharField(blank=True, max_length=100, null=True)),
                ('estado_civil', models.CharField(blank=True, choices=[('SOLTEIRO', 'Solteiro(a)'), ('CASADO', 'Casado(a)'), ('VIUVO', 'Viúvo(a)'), ('DIVORCIADO', 'Divorciado(a)'), ('NAO_INFORMADO', 'Não Informado')], max_length=20, null=True)),
                ('nome_conjuge', models.CharField(blank=True, max_length=255, null=True, verbose_name='Nome do Cônjuge')),
                ('profissao', models.CharField(blank=True, max_length=255, null=True)),
                ('grau_instrucao', models.CharField(blank=True, max_length=255, null=True, verbose_name='Escolaridade')),
                ('logradouro', models.CharField(blank=True, max_length=255, null=True, verbose_name='Logradouro')),
                ('numero', models.CharField(blank=True, max_length=20, null=True, verbose_name='Número')),
                ('bairro', models.CharField(blank=True, max_length=100, null=True, verbose_name='Bairro')),
                ('cidade', models.CharField(blank=True, max_length=100, null=True, verbose_name='Cidade')),
                ('estado', models.CharField(blank=True, max_length=2, null=True, verbose_name='Estado')),
                ('data_falecimento', models.DateField(blank=True, null=True)),
                ('hora_falecimento', models.TimeField(blank=True, null=True)),
                ('local_falecimento', models.CharField(blank=True, max_length=255, null=True)),
                ('causa_morte', models.CharField(blank=True, max_length=255, null=True)),
                ('medico_responsavel', models.CharField(blank=True, max_length=255, null=True)),
                ('crm_medico', models.CharField(blank=True, max_length=50, null=True)),
                ('idade_ao_falecer', models.PositiveIntegerField(blank=True, editable=False, null=True)),
                ('cartorio_nome', models.CharField(blank=True, max_length=255, null=True)),
                ('cartorio_numero_registro', models.CharField(blank=True, max_length=100, null=True)),
                ('cartorio_livro', models.CharField(blank=True, max_length=50, null=True)),
                ('cartorio_folha', models.CharField(blank=True, max_length=50, null=True)),
                ('cartorio_data_registro', models.DateField(blank=True, null=True)),
                ('ordem_no_tumulo', models.PositiveIntegerField(blank=True, null=True)),
                ('data_sepultamento', models.DateField(blank=True, null=True)),
                ('observacoes', models.TextField(blank=True, null=True)),
                ('exumado', models.BooleanField(default=False)),
                ('data_exumacao', models.DateField(blank=True, null=True)),
                ('trasladado', models.BooleanField(default=False)),
                ('data_translado', models.DateField(blank=True, null=True)),
                ('tumulo', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='sepultados_gestao.tumulo')),
            ],
        ),
        migrations.CreateModel(
            name='Receita',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_documento', models.CharField(blank=True, editable=False, max_length=20, null=True, verbose_name='Número')),
                ('nome', models.CharField(blank=True, max_length=255, null=True, verbose_name='Nome')),
                ('cpf', models.CharField(blank=True, max_length=18, null=True, verbose_name='CPF/CNPJ')),
                ('descricao', models.CharField(editable=False, max_length=255, verbose_name='Descrição')),
                ('valor_total', models.DecimalField(decimal_places=2, editable=False, max_digits=10, verbose_name='Valor total')),
                ('desconto', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Desconto')),
                ('valor_pago', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Valor pago')),
                ('valor_em_aberto', models.DecimalField(decimal_places=2, editable=False, max_digits=10, verbose_name='Valor em aberto')),
                ('data_vencimento', models.DateField(editable=False, verbose_name='Data de vencimento')),
                ('data_pagamento', models.DateField(blank=True, null=True, verbose_name='Data de pagamento')),
                ('status', models.CharField(choices=[('aberto', 'Aberto'), ('parcial', 'Parcial'), ('pago', 'Pago')], default='aberto', editable=False, max_length=20)),
                ('multa', models.DecimalField(decimal_places=2, default=Decimal('0.00'), editable=False, max_digits=10, verbose_name='Multa')),
                ('juros', models.DecimalField(decimal_places=2, default=Decimal('0.00'), editable=False, max_digits=10, verbose_name='Juros')),
                ('mora_diaria', models.DecimalField(decimal_places=2, default=Decimal('0.00'), editable=False, max_digits=10, verbose_name='Mora Diária')),
                ('movimentacao', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receitas', to='sepultados_gestao.movimentacaosepultado', verbose_name='Movimentação')),
                ('prefeitura', models.ForeignKey(editable=False, on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.prefeitura')),
            ],
            options={
                'verbose_name': 'Receita',
                'verbose_name_plural': 'Receitas',
            },
        ),
        migrations.AddField(
            model_name='movimentacaosepultado',
            name='sepultado',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.sepultado'),
        ),
        migrations.AddField(
            model_name='movimentacaosepultado',
            name='tumulo_destino',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='movimentacoes_destino', to='sepultados_gestao.tumulo', verbose_name='Túmulo de destino'),
        ),
        migrations.AddField(
            model_name='movimentacaosepultado',
            name='tumulo_origem',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='movimentacoes_origem', to='sepultados_gestao.tumulo', verbose_name='Túmulo de origem'),
        ),
        migrations.CreateModel(
            name='Licenca',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_inicio', models.DateField(default=sepultados_gestao.models.data_hoje)),
                ('anos_contratados', models.PositiveIntegerField(default=1)),
                ('valor_mensal_atual', models.DecimalField(decimal_places=2, max_digits=8)),
                ('percentual_reajuste_anual', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Reajuste anual (%)')),
                ('usuarios_min', models.PositiveIntegerField()),
                ('usuarios_max', models.PositiveIntegerField()),
                ('sepultados_max', models.PositiveIntegerField(blank=True, null=True)),
                ('inclui_api', models.BooleanField(default=False)),
                ('inclui_erp', models.BooleanField(default=False)),
                ('inclui_suporte_prioritario', models.BooleanField(default=False)),
                ('plano', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='sepultados_gestao.plano')),
                ('prefeitura', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.prefeitura')),
            ],
            options={
                'verbose_name': 'Licença',
                'verbose_name_plural': 'Licenças',
            },
        ),
        migrations.CreateModel(
            name='ConcessaoContrato',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_contrato', models.CharField(blank=True, editable=False, max_length=20, null=True, verbose_name='Número do Contrato')),
                ('nome', models.CharField(max_length=255, verbose_name='Nome')),
                ('cpf', models.CharField(max_length=18, validators=[django.core.validators.RegexValidator(message='Informe um CPF ou CNPJ válido com máscara (ex: 000.000.000-00 ou 00.000.000/0000-00).', regex='^(\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}|\\d{2}\\.\\d{3}\\.\\d{3}/\\d{4}-\\d{2})$')], verbose_name='CPF/CNPJ')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('logradouro', models.CharField(blank=True, max_length=255, null=True, verbose_name='Logradouro')),
                ('endereco_numero', models.CharField(blank=True, max_length=20, null=True, verbose_name='Número')),
                ('endereco_bairro', models.CharField(blank=True, max_length=100, null=True, verbose_name='Bairro')),
                ('endereco_cidade', models.CharField(blank=True, max_length=100, null=True, verbose_name='Cidade')),
                ('endereco_estado', models.CharField(blank=True, choices=[('AC', 'AC'), ('AL', 'AL'), ('AP', 'AP'), ('AM', 'AM'), ('BA', 'BA'), ('CE', 'CE'), ('DF', 'DF'), ('ES', 'ES'), ('GO', 'GO'), ('MA', 'MA'), ('MT', 'MT'), ('MS', 'MS'), ('MG', 'MG'), ('PA', 'PA'), ('PB', 'PB'), ('PR', 'PR'), ('PE', 'PE'), ('PI', 'PI'), ('RJ', 'RJ'), ('RN', 'RN'), ('RS', 'RS'), ('RO', 'RO'), ('RR', 'RR'), ('SC', 'SC'), ('SP', 'SP'), ('SE', 'SE'), ('TO', 'TO')], max_length=2, null=True, verbose_name='Estado')),
                ('endereco_cep', models.CharField(blank=True, max_length=10, null=True, verbose_name='CEP')),
                ('data_contrato', models.DateField(default=django.utils.timezone.now, verbose_name='Data do contrato')),
                ('forma_pagamento', models.CharField(choices=[('gratuito', 'Gratuito'), ('avista', 'À Vista'), ('parcelado', 'Parcelado')], default='gratuito', max_length=10, verbose_name='Forma de Pagamento')),
                ('quantidade_parcelas', models.PositiveIntegerField(blank=True, null=True, verbose_name='Quantidade de Parcelas')),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Valor total')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('prefeitura', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.prefeitura', verbose_name='Prefeitura')),
                ('tumulo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.tumulo', verbose_name='Túmulo')),
                ('usuario_registro', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Usuário responsável')),
            ],
            options={
                'verbose_name': 'Contrato de Concessão',
                'verbose_name_plural': 'Contratos de Concessão',
            },
        ),
        migrations.AddField(
            model_name='cemiterio',
            name='prefeitura',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.prefeitura'),
        ),
        migrations.CreateModel(
            name='NumeroSequencialGlobal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero', models.PositiveIntegerField()),
                ('ano', models.IntegerField()),
                ('prefeitura', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sepultados_gestao.prefeitura')),
            ],
            options={
                'verbose_name': 'Número Sequencial Global',
                'verbose_name_plural': 'Números Sequenciais Globais',
                'unique_together': {('prefeitura', 'numero', 'ano')},
            },
        ),
    ]
