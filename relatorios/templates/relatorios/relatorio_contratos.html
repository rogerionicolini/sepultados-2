{% extends "admin/base_site.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<h1 style="margin-bottom: 20px;">ðŸ“„ RelatÃ³rio de Contratos de ConcessÃ£o</h1>

<form method="get" class="form-inline" style="margin-bottom: 20px;">
    <div style="margin-bottom: 10px;">
        <label for="data_inicio">Data de InÃ­cio:</label>
        <input type="date" id="data_inicio" name="data_inicio" value="{{ data_inicio }}" class="vDateField">
    </div>
    <div style="margin-bottom: 10px;">
        <label for="data_fim">Data de Fim:</label>
        <input type="date" id="data_fim" name="data_fim" value="{{ data_fim }}" class="vDateField">
    </div>
    <button type="submit" class="button">Filtrar</button>

    <a href="{% url 'relatorios:relatorio_contratos_pdf' %}?data_inicio={{ data_inicio }}&data_fim={{ data_fim }}"
       target="_blank" class="button"
       style="background-color: #4CAF50; color: white; padding: 5px 10px; text-decoration: none;">
        ðŸ“„ Gerar PDF
    </a>
</form>

{% if contratos %}
    <table class="table" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f0f0f0;">
                <th style="border: 1px solid #ccc; padding: 5px;">NÃºmero</th>
                <th style="border: 1px solid #ccc; padding: 5px;">Data do Contrato</th>
                <th style="border: 1px solid #ccc; padding: 5px;">Nome</th>
                <th style="border: 1px solid #ccc; padding: 5px;">CPF/CNPJ</th>
                <th style="border: 1px solid #ccc; padding: 5px;">TÃºmulo</th>
                <th style="border: 1px solid #ccc; padding: 5px;">Quadra</th>
            </tr>
        </thead>
        <tbody>
            {% for contrato in contratos %}
                <tr>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.numero_contrato }}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.data_contrato|date:"d/m/Y" }}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.nome }}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.cpf }}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.tumulo.codigo }}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">{{ contrato.tumulo.quadra.codigo }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Nenhum contrato encontrado para os filtros selecionados.</p>
{% endif %}
{% endblock %}
